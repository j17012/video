{% extends 'app/base.html' %}

{% block content %}

<p>動画再生</p>

    <!--動画再生部分-->
    <video id="video" height="480" controls></video><br/>
    <!--動画ファイルを選択する-->
    <p>ファイルを選択して下さい<br/></p>
    <input type="file" id="filename" value="ファイル読み込み"/><br/>
    <!--再生ボタン-->
    <input type="button" value="再生" onClick="play()"/>
    <!--停止ボタン-->
    <input type="button" value="停止" onClick="pause()"/><br/>
    <!--再生位置の表示-->
    再生位置  :<span id="position">-</span><br/>

    <form action="{% url  'app:index' %}">
        <input id = 'next' type="submit" value="トップページ"/>

        <script>

            //選択された動画ファイルを再生する
            function init(){
                var f = document.getElementById("filename");
                f.addEventListener( "change", function (event) {
                    var URL = URL || webkitURL;
                    var file = event.target.files[0];
                    document.querySelector('video').src = URL.createObjectURL(file);
                    document.getElementById('filename').innerHTML = document.querySelector('video').src;
                }, false );
                //動画の現在の再生位置を表示する
                    var v = document.getElementById("video");
                    v.addEventListener("timeupdate", function(){
                    document.getElementById("position").innerHTML = v.currentTime;
                }, false);
            }
            //動画の再生
            function play() {
                var v = document.getElementById("video");
                if  ( v == null || v.src == null ) return;
                v.play();
            }
            //動画の一時停止
            function pause() {
                var v = document.getElementById("video");
                if  ( v == null || v.src == null ) return;
                v.pause();
            }
        
            init()
        
            </script>
{% endblock %}

